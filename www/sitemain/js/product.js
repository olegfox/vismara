// Generated by CoffeeScript 1.10.0
var Product;

Product = {
  detectmob: function() {
    if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {
      return true;
    } else {
      return false;
    }
  },
  loadImage: function($img, width) {
    $img.one('load', function() {
      if (width) {
        Product.cropImage($img, width);
      } else {
        Product.cropImage($img);
      }
      setTimeout((function() {
        $img.css({
          'visibility': 'visible'
        });
      }), 200);
    }).each(function() {
      if (this.complete) {
        $(this).load();
      }
    });
  },
  showProduct: function(product) {
    var timeout;
    timeout = 0;
    $('#mobileMeta').remove();
    $('head').append('<meta id="mobileMeta" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>');
    $('body').css({
      'overflow-x': 'hidden'
    });
    $('body > .wrap').hide();
    $('body > .icone').hide();
    $('body > .language').hide();
    $('body').append('<div class="global-background"></div>');
    if ($('.global').length > 0) {
      $('.global').remove();
    }
    setTimeout((function() {
      $('body').append(JSON.parse($(product).data('html')));
      if (window.history.pushState) {
        window.history.pushState(null, null, $(product).attr('href'));
      }
      $('.global .ar_close').unbind('click').click(function() {
        $('body').css({
          'overflow-x': 'auto'
        });
        $('body > .wrap').show();
        $('body > .icone').show();
        $('body > .language').show();
        $('.global-background').remove();
        $('#mobileMeta').remove();
        $('head').append('<meta id="mobileMeta" name="viewport" content=""/>');
        $('.global').remove();
        window.history.back();
      });
      $('.global .arrow_right').unbind('click').click(function(e) {
        e.preventDefault();
        Product.showProduct($(product).parent().next().find('a:first'));
      });
      $('.global .arrow_left').unbind('click').click(function(e) {
        e.preventDefault();
        Product.showProduct($(product).parent().prev().find('a:first'));
      });
      if ($(product).parent().next().find('a:first').length <= 0) {
        $('.global .arrow_right').hide();
      } else {
        $('.global .arrow_right').show();
      }
      if ($(product).parent().prev().find('a:first').length <= 0) {
        $('.global .arrow_left').hide();
      } else {
        $('.global .arrow_left').show();
      }
      $('body').unbind('keydown').keydown(function(e) {
        if (e.keyCode === 37) {
          $('.global .arrow_left').click();
        } else if (e.keyCode === 39) {
          $('.global .arrow_right').click();
        } else if (e.keyCode === 27) {
          $('.global .ar_close img').click();
        }
      });
      $('.global .readmore').unbind('click').bind('click', function(e) {
        var $content;
        e.preventDefault();
        $content = JSON.parse($('.global .text .inner-text').attr('data-full-text'));
        $('.global .text .inner-text').html($content);
        return false;
      });
      $('.slider').slick({
        dots: true,
        infinite: true,
        arrows: false
      });
    }), timeout);
    return false;
  }
};
